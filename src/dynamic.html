<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.simplecss.org/simple.min.css" rel="stylesheet">
        <title>Dynamic semantics tests</title>
    </head>
    <body>
        <h1>Dynamic semantics tests</h1>
        <div>
            <h2><span>Initial State</span></h2>
            <h4>When given as input:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <pre class="rascal"><code><span class="Keyword">form</span> X {
        "x" x: <span class="Keyword">boolean</span>
        "y" y: <span class="Keyword">integer</span>
        "z" z: <span class="Keyword">string</span>
    }</code></pre>
            <h4>Should evaluate to:</h4>
            <pre>{x: false, y: 0, z: ""}</pre>
        </div>
        <div>
            <h2><span style="color: red;">Division By Zero</span></h2>
            <h4>When given as input:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <pre class="rascal"><code><span class="Keyword">form</span> X {
        "x" x: <span class="Keyword">integer</span> = 1/0
    }</code></pre>
            <h4>Should evaluate to:</h4>
            <pre>{}</pre>
            <ul>
                <li>error: exception during eval: ArithmeticException("/ by zero") at line 0</li>
            </ul>
        </div>
        <div>
            <h2><span style="color: red;">Computed Questions Are Initialized</span></h2>
            <h4>When given as input:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <pre class="rascal"><code><span class="Keyword">form</span> X {
        "x" x: <span class="Keyword">boolean</span> = <span class="Keyword">true</span>
        "y" y: <span class="Keyword">integer</span> = 4233
        "z" z: <span class="Keyword">string</span> = "hello world!"
    }</code></pre>
            <h4>Should evaluate to:</h4>
            <pre>{x: true, y: 42, z: "hello world!"}</pre>
            <ul>
                <li>error: got {x: true, y: 4233, z: "hello world!"} at line 5</li>
            </ul>
        </div>
        <div>
            <h2><span>Disabled Questions Are Not Changed</span></h2>
            <h4>When given as input:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>x</td>
                        <td>10</td>
                    </tr>
                </tbody>
            </table>
            <pre class="rascal"><code><span class="Keyword">form</span> X {
        <span class="Keyword">if</span> (1 &gt; 2) "x" x: <span class="Keyword">integer</span>
    }</code></pre>
            <h4>Should evaluate to:</h4>
            <pre>{x: 0}</pre>
        </div>
        <div>
            <h2><span>Questions Retain Values Across Visibility Changes</span></h2>
            <h4>When given as input:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>x</td>
                        <td>true</td>
                    </tr>
                    <tr>
                        <td>y</td>
                        <td>42</td>
                    </tr>
                    <tr>
                        <td>x</td>
                        <td>false</td>
                    </tr>
                    <tr>
                        <td>z</td>
                        <td>2</td>
                    </tr>
                    <tr>
                        <td>x</td>
                        <td>true</td>
                    </tr>
                </tbody>
            </table>
            <pre class="rascal"><code><span class="Keyword">form</span> X {
        "X" x: <span class="Keyword">boolean</span>
        <span class="Keyword">if</span> (x) 
            "Y" y: <span class="Keyword">integer</span>
        "Z" z: <span class="Keyword">integer</span>
        "Sum" sum: <span class="Keyword">integer</span> = z + y
    }</code></pre>
            <h4>Should evaluate to:</h4>
            <pre>{x: true, y: 42, z: 2, sum: 44}</pre>
        </div>
        <div>
            <h2><span>Referencing Works Out Of Order</span></h2>
            <h4>When given as input:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>x</td>
                        <td>10</td>
                    </tr>
                </tbody>
            </table>
            <pre class="rascal"><code><span class="Keyword">form</span> X {
        "y" y: <span class="Keyword">integer</span> = x
        "x" x: <span class="Keyword">integer</span>
    }</code></pre>
            <h4>Should evaluate to:</h4>
            <pre>{x: 10, y: 10}</pre>
        </div>
        <div>
            <h2><span>Fixpoint Evaluation</span></h2>
            <h4>When given as input:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>c</td>
                        <td>10</td>
                    </tr>
                </tbody>
            </table>
            <pre class="rascal"><code><span class="Keyword">form</span> X {
        "A" a: <span class="Keyword">integer</span> = c+b+1
        "B" b: <span class="Keyword">integer</span> = c+1
        "C" c: <span class="Keyword">integer</span>
    }</code></pre>
            <h4>Should evaluate to:</h4>
            <pre>{a: 22, b: 11, c: 10}</pre>
        </div>
        <div>
            <h2><span>Multiplication Has Higher Precedence Than Addition</span></h2>
            <h4>When given as input:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <pre class="rascal"><code><span class="Keyword">form</span> X {
        "X" x: <span class="Keyword">integer</span> = 1 + 2 * 3
    }</code></pre>
            <h4>Should evaluate to:</h4>
            <pre>{x: 7}</pre>
        </div>
        <div>
            <h2><span>Subtraction Associates To The Left</span></h2>
            <h4>When given as input:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <pre class="rascal"><code><span class="Keyword">form</span> X {
        "X" x: <span class="Keyword">integer</span> = 1 <span class="Keyword">-</span> 2 <span class="Keyword">-</span> 3
    }</code></pre>
            <h4>Should evaluate to:</h4>
            <pre>{x: -4}</pre>
        </div>
        <div>
            <h2><span>Parentheses Override Associativity</span></h2>
            <h4>When given as input:</h4>
            <table>
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <pre class="rascal"><code><span class="Keyword">form</span> X {
        "X" x: <span class="Keyword">integer</span> = 1 <span class="Keyword">-</span> (2 <span class="Keyword">-</span> 3)
    }</code></pre>
            <h4>Should evaluate to:</h4>
            <pre>{x: 2}</pre>
        </div>
    </body>
</html>